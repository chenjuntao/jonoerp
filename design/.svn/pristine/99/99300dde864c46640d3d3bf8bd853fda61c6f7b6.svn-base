/* by cjt,2014.7.11 */

--创建单据明细表---------------------------------------------
drop table d_t_food_bill cascade constraints;
create table d_t_food_bill(
cBill_c			varchar2(90)	not null,
dBusiness		date			not null,
cTable_c		varchar2(12)	not null,
cTable_n		varchar2(36)	not null,
cPeriod_c		varchar2(12)	not null,
cPeriod_n		varchar2(36)	not null,
cShift_c		varchar2(12)	not null,
cShift_n		varchar2(36)	not null,
cVip_c			varchar2(60),
cVip_n			varchar2(90),
--cTableBill	varchar2(36)	not null,
cTableBill		varchar2(36)	not null,
iGuestNum		number(10)		not null,
dtBillTime		date			not null,
dtSettleTime	date			not null,
eStatus			varchar2(72)	not null,
iPrintTimes		number(10)		not null,
nFoodAmt		number(9,2)		not null,
--eServicePay	varchar2(48)	not null,
eServicePay		varchar2(72)	not null,
nServiceRate	number(9,2)		not null,
nServiceFee		number(9,2)		not null,
eMinPay			varchar2(72)	not null,
nMinPay			number(9,2)		not null,
nDisAmt			number(9,2)		not null,
nDisRate		number(9,2)		not null,
nRoundAmt		number(9,2)		not null,
nOughtAmt		number(9,2)		not null,
bSettle			number(1)		not null,
bUnSettle		number(1)		not null,
cCreateMan_c	varchar2(36)	not null,
cCreateMan		varchar2(36)	not null,
cSettleMan_c	varchar2(36)	not null,
cSettleMan		varchar2(36)	not null,
cUnSettleMan_c	varchar2(36)	not null,
cUnSettleMan	varchar2(36)	not null,
cDiscountMan_c	varchar2(36)	not null,
cDiscountMan	varchar2(36)	not null,
sRemark			varchar2(768)	not null,
bUnFee			number(1)		not null,
bUnMin			number(1)		not null,
eWholeType		varchar2(72)	not null,
nPayAmt			number(12,2)	not null,
cLockMan_c		varchar2(36)	not null,
cLockMan		varchar2(36)	not null,
sSex			varchar2(36),
sAgeSegment		varchar2(72),
sRemarkNew		varchar2(192)	not null,
sAziMuth		varchar2(36)	not null,
iFlowId			number(10)		not null,
sBillType		varchar2(36)	not null,
sSendMan		varchar2(36)	not null,
cBranch_c		varchar2(12),
cBranch_n		varchar2(90),
cTimeFee_c		varchar2(12),
nTimeAmt		number(9,2),
bUnTea			number(1),
bUnJie			number(1),
bOrderCode		varchar2(60),
bMTable_c		number(1),
sDataFlag		varchar2(36),
nDisAmtFull		number(9,2),
nDisRateCur		number(9,2),
nDisAmtCur		number(9,2),
cPos_c			varchar2(36),
cFadeBill_c		varchar2(60),
cTable_cadd		clob,
cDisManCur_n	varchar2(36),
cPrintDocMan	varchar2(36),
cSerMan			varchar2(36),
dPrintDocTime	date,
cFadeBillMan_c	varchar2(36),
cFadeBillMan	varchar2(36),
nDisAmtService	number(9,2),
nServiceFeeOld	number(9,2),
nOughtAmtAver	number(9,2),
bTicket			number(1),
dtTimeBegin		date,
dtTimeEnd		date,
GetAmt			number(9,2),
nVipAmt			number(9,2),
nCommonAmt		number(9,2),
bUnTime			number(1),
iFadeType		number(1),
nPresentAmt		number(9,2),
nVipFoodOriAmt	number(9,2),
cFloor_n		varchar2(90),
cFloor_c		varchar2(12),
cDisCurWhy		varchar2(60),
cDisFullWhy		varchar2(60),
cAcNobm			varchar2(60),
nMinPayFill		number(9,2),
nFactAmt		number(9,2),
nEraseAmt		number(9,2),
cEraseMan		varchar2(36),
cTicket_c		varchar2(12),
nTicketnQty		number(9,2),
nRemindTime		number(10),
cArrear_c		varchar2(60),
cArrear_n		varchar2(90),
cConsume_n		varchar2(60),
cRemark			varchar2(120),
dtSendTime		date,
com_no			number(10)		not null,
nDisRateService	number(9,2),
nDisAmtServ_hand	number(9,2),
cDisServMan		varchar2(36),
sDisServWhy		varchar2(60),
cashPrint_num	number(10)		not null,
dtChmatTime		date,
cFreeBillRsn	varchar2(60),
nInTicketAmt	number(14,4),
bBanBill		number(1),
nExtBanAmt		number(14,4),
constraint d_t_food_bill_pk primary key(cBill_c) 
);

--创建出品明细表---------------------------------------------
drop table d_t_food_bills cascade constraints;
create table d_t_food_bills(
cBill_c			varchar2(90)	not null,
cFoodBill		varchar2(12)	not null,
cFood_c			varchar2(36)	not null,
cFood_n			varchar2(210)	not null,
sUnit			varchar2(36)	not null,
nPrc			number(9,2)		not null,
nQty			number(12,4),
nAmt			number(9,2)		not null,
nExtPrc			number(9,2)		not null,
bDiscount		number(1)		not null,
eSuitFlag		varchar2(72)	not null,
cSuitBill		varchar2(12)	not null,
eRetSendFlag	varchar2(12)	not null,
sRetSendReMark	varchar2(90)	not null,
sMade			varchar2(192)	not null,
cServiceMan		varchar2(36)	not null,
nDisRate		number(9,2)		not null,
nDisAmt			number(9,2)		not null,
cPos_c			varchar2(36)	not null,
cLogin			varchar2(36)	not null,
cRetSendBill	varchar2(90)	not null,
sTimeNumber		varchar2(120),
cSuitName		varchar2(90)	not null,
cNameEng		varchar2(240),
cLitCls_c		varchar2(12),
clitCls_n		varchar2(90),
nPrcBase		number(9,2),
nPrcRoom		number(9,2),
nDeduct			number(9,2),
nCost			number(9,2),
bHandFood		number(1),
cBigCls_c		varchar2(12),
cBigCls_n		varchar2(90),
cSortBill		varchar2(90),
dtInputTime		date,
iPrcType		number(3),
sDataFlag		varchar2(36),
bServiceFee		number(1),
bLimit			number(1),
nDisAmts		number(9,2),
cDiscountMan_n	varchar2(36),
nDisRateFood	number(9,2),
nDisAmtFood		number(9,2),
cTable_cadd		clob,
sReservedrmk	varchar2(300),
sArea			varchar2(60),
sCustRemark		varchar2(150),
cDep_c			varchar2(12),
cDep_n			varchar2(90),
cPreBill		varchar2(12),
cEnterDocMan	varchar2(36),
nServiceFees	number(9,2),
bPrintTotalBill	number(1),
iSaleId			number(10),
cSaleBill		varchar2(12),
cSaleSortBill	varchar2(12),
eSaleFlag		varchar2(72),
cBarCode		varchar2(60),
dtPullTime		date,
cPullMan		varchar2(36),
nDoQty			number(12,4),
bPullSpeed		number(1),
bSetWeighted	number(1),
cPresentBackMan	varchar2(36),
nPrcold			number(9,2),
bModiPrced		number(1),
nDeductPer		number(9,2),
cDiscountWhy	varchar2(60),
cMainMade		varchar2(120),
cBillQuick		varchar2(120),
bDis_food		number(1),
eVoucherFlag	varchar2(60),
cVoucherBill	varchar2(60),
merge_table		varchar2(192),
cTBill_c		varchar2(36),
bTimeFee		number(10),
bInTicket		number(1),
bBanquet		number(1),
--constraint d_t_food_bills_fk foreign key(cBill_c) references d_t_bill_pay(cBill_c),
constraint d_t_food_bills_pk primary key(cBill_c,cFoodBill,cFood_c)
); 

--创建付款明细表---------------------------------------------------
drop table d_t_bill_pay cascade constraints;
create table d_t_bill_pay(
cBill_c		varchar2(90)	not null,
cBillNum	varchar2(12)	not null,
cPay_c		varchar2(12)	not null,
cPay_n		varchar2(36)	not null,
sUnit		varchar2(36)	not null,
eInType		varchar2(72)	not null,
nExchRate	number(9,5)		not null,
nOldAmt		number(9,2)		not null,
nPayAmt		number(9,2)		not null,
--cGrantMan_c varchar2(36)	not null,
--cGrantMan	varchar2(36)	not null,
cGrantMan_c	varchar2(36),
cGrantMan	varchar2(36),
cPayMan_c	varchar2(36)	not null,
cPayMan		varchar2(36)	not null,
ePayType	varchar2(72),
card_id		varchar2(60),
--cVIP_n	varchar2(90)	not null,
cVIP_n		varchar2(90),
bPreAmt		number(1),
cConsume_n	varchar2(60),
cOuterCode	varchar2(60),
iother		number(3),
cArrear_c	varchar2(60),
cArrear_n	varchar2(90),
cShift_c	varchar2(12),
cShift_n	varchar2(36),
nBankAmt	number(9,2),
constraint d_t_bill_pay_pk primary key(cBill_c,cBillNum)
);