<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=gb2312" />

<title>½ðÅ£½ÇERP</title>
	<script src='common/lib/dojo/dojo.js'></script>
	<style>
	.loading{
		position: absolute;left: 0px;top: 0px;z-index: 300;
		width: 100%;height: 100%;background: red;
	}
	
	.tab_iframe{
		border: 0px;padding: 0px;margin: 0px;display: none;
		width: 100%;height: 100%;
	}
	
	</style>
	<script type="text/javascript">
	require([ "dojo/ready"], function(ready, registry, win,parser) {
		ready(function(){
			var _url = 'http://www.baidu.com';
			var ifrHtml = '<div>'
				 + '<div class="loading"></div>'
				 + '<iframe class="tab_frame" onload="test();" src="' + _url + '"></iframe>'
				 + '</div>';
			
			dojo.place('<div class="loading"></div>','ifrTest');
			var ifrm = dojo.create('iframe', { 
// 			    src: '../businessquery/importerror/mainView.action', 
				src: _url,
				class: 'tab_iframe',
			    onload : test
				},'ifrTest');

// 	 		dojo.byId('ifrTest').innerHTML = ifrm;
// 	 		parser.parse();
//	 		dojo.connect(ifrm, "onload", test);
	 		//console.log(ifrm);
		});
	});

function test(){

	dojo.require("dojo.NodeList-traverse");
	var msgSpan = dojo.query(this).prev()[0];
	msgSpan.style.display = 'none';
	this.style.display = 'block';
	console.log(msgSpan);
	console.log(document.getElementById('ifrTest'));
}

</script>
</head>

<body>
	<input type="button" onclick="test()" value="test" />
	<div id="ifrTest" style="width: 100%;height: 100%;">sdfsdfsf</div>
</body>
</html>
